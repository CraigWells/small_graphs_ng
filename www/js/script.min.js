!function(a){"use strict";var b=a.module("beanApp",[]).controller("MainCtrl",["$scope",function(a){}]);b.factory("graphData",function(){function a(){for(var a=data.length,d=0;a>d;d++)b(data[d],c),data[d].height=g,data[d].width=h;return data}function b(a,b){var c=[];for(var e in a.columnValues)c.push(a.columnValues[e]);a.values=c,b(a,d)}function c(a,b){a.pointsY=[];for(var c=a.values.length,d=f(a.values),h=e(a.values)-d,i=g/h,j=0;c>j;j++)a.pointsY.push(g-(a.values[j]-d)*i);b(a)}function d(a){var b=a.pointsY.length-1,c=Math.floor(h/b),d=0;a.pointsX=[],a.pointsX.push(d);for(var e=0;b>e;e++)d+=c,a.pointsX.push(d)}function e(a){return Math.max.apply(null,a)}function f(a){return Math.min.apply(null,a)}var g=80,h=170;return a()}),b.factory("graphRenderer",function(){function b(a){var b={a:0,b:a.height/2,c:a.width,d:a.height/2,colour:"#909090"},c=document.getElementById(a.name),d=c.getContext("2d");d.beginPath(),d.moveTo(b.a,b.b),d.lineTo(b.c,b.d),d.strokeStyle=b.colour,d.stroke();var e=a.pointsX.length;d.beginPath();for(var f=0;e>f;f++)d.lineTo(a.pointsX[f],a.pointsY[f]);d.strokeStyle="red",d.stroke()}return function(c){a.forEach(c,function(a){b(a)})}}),b.directive("graphs",["graphData","$timeout","graphRenderer",function(a,b,c){return{restrict:"E",templateUrl:"views/graph.html",link:function(d,e){d.graphs=a,b(function(){c(a)})}}}])}(window.angular);